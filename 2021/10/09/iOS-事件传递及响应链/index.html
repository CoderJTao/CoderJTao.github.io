<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"yoursite.com","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.11.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="è®°å¾—åœ¨å‡ å¹´å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« ã€Šä¸è§„åˆ™ Button ç‚¹å‡»ã€‹ç ”ç©¶äº†ä¸€ä¸‹ iOS ä¸­äº‹ä»¶å“åº”çš„ç›¸å…³çŸ¥è¯†ã€‚ æœ€è¿‘åˆšå¥½ç¢°åˆ°äº†ä¸€äº›ç‚¹å‡»å’Œæ‰‹åŠ¿ç›¸å…³çš„é—®é¢˜ï¼Œå°±è¯¦ç»†è®°å½•ä¸€ä¸‹ iOS ä¸­äº‹ä»¶å“åº”ï¼Œäº‹ä»¶ä¼ é€’ä»¥åŠç»“åˆæ‰‹åŠ¿ä¸€èµ·ä½¿ç”¨æ—¶çš„æƒ…å†µã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS äº‹ä»¶ä¼ é€’åŠå“åº”é“¾">
<meta property="og:url" content="http://yoursite.com/2021/10/09/iOS-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%8A%E5%93%8D%E5%BA%94%E9%93%BE/index.html">
<meta property="og:site_name" content="æ±Ÿæ¶›çš„åšå®¢">
<meta property="og:description" content="è®°å¾—åœ¨å‡ å¹´å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« ã€Šä¸è§„åˆ™ Button ç‚¹å‡»ã€‹ç ”ç©¶äº†ä¸€ä¸‹ iOS ä¸­äº‹ä»¶å“åº”çš„ç›¸å…³çŸ¥è¯†ã€‚ æœ€è¿‘åˆšå¥½ç¢°åˆ°äº†ä¸€äº›ç‚¹å‡»å’Œæ‰‹åŠ¿ç›¸å…³çš„é—®é¢˜ï¼Œå°±è¯¦ç»†è®°å½•ä¸€ä¸‹ iOS ä¸­äº‹ä»¶å“åº”ï¼Œäº‹ä»¶ä¼ é€’ä»¥åŠç»“åˆæ‰‹åŠ¿ä¸€èµ·ä½¿ç”¨æ—¶çš„æƒ…å†µã€‚">
<meta property="og:locale">
<meta property="og:image" content="http://yoursite.com/2021/10/09/iOS-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%8A%E5%93%8D%E5%BA%94%E9%93%BE/layer_level.jpg">
<meta property="og:image" content="http://yoursite.com/2021/10/09/iOS-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%8A%E5%93%8D%E5%BA%94%E9%93%BE/touch_A.jpg">
<meta property="og:image" content="http://yoursite.com/2021/10/09/iOS-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%8A%E5%93%8D%E5%BA%94%E9%93%BE/touch_C.jpg">
<meta property="og:image" content="http://yoursite.com/2021/10/09/iOS-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%8A%E5%93%8D%E5%BA%94%E9%93%BE/event_move.jpg">
<meta property="og:image" content="http://yoursite.com/2021/10/09/iOS-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%8A%E5%93%8D%E5%BA%94%E9%93%BE/uicontrol_gesture.jpg">
<meta property="article:published_time" content="2021-10-09T10:23:09.000Z">
<meta property="article:modified_time" content="2023-02-08T05:54:14.150Z">
<meta property="article:author" content="JTao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2021/10/09/iOS-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%8A%E5%93%8D%E5%BA%94%E9%93%BE/layer_level.jpg">


<link rel="canonical" href="http://yoursite.com/2021/10/09/iOS-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%8A%E5%93%8D%E5%BA%94%E9%93%BE/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-Hans","comments":true,"permalink":"http://yoursite.com/2021/10/09/iOS-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%8A%E5%93%8D%E5%BA%94%E9%93%BE/","path":"2021/10/09/iOS-äº‹ä»¶ä¼ é€’åŠå“åº”é“¾/","title":"iOS äº‹ä»¶ä¼ é€’åŠå“åº”é“¾"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>iOS äº‹ä»¶ä¼ é€’åŠå“åº”é“¾ | æ±Ÿæ¶›çš„åšå®¢</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">æ±Ÿæ¶›çš„åšå®¢</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AF%BB%E6%89%BE%E6%9C%80%E4%BD%B3%E5%93%8D%E5%BA%94%E8%80%85%E5%92%8C%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92"><span class="nav-number">1.</span> <span class="nav-text">å¯»æ‰¾æœ€ä½³å“åº”è€…å’Œäº‹ä»¶ä¼ é€’</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E8%80%85"><span class="nav-number">1.1.</span> <span class="nav-text">å“åº”è€…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%BB%E6%89%BE%E6%9C%80%E4%BD%B3%E5%93%8D%E5%BA%94%E8%80%85"><span class="nav-number">1.2.</span> <span class="nav-text">å¯»æ‰¾æœ€ä½³å“åº”è€…</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BB%E6%89%BE%E8%BF%87%E7%A8%8B"><span class="nav-number">1.2.1.</span> <span class="nav-text">å¯»æ‰¾è¿‡ç¨‹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%82%B9%E5%87%BB-A-%E5%86%85%E9%83%A8"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">ç‚¹å‡» A å†…éƒ¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%82%B9%E5%87%BB-C-%E5%86%85%E9%83%A8"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">ç‚¹å‡» C å†…éƒ¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%82%B9%E5%87%BB-E-%E5%86%85%E9%83%A8"><span class="nav-number">1.2.1.3.</span> <span class="nav-text">ç‚¹å‡» E å†…éƒ¨</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%8F%E7%BB%93"><span class="nav-number">1.2.2.</span> <span class="nav-text">å°ç»“</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%A0%E9%80%92%E4%BA%8B%E4%BB%B6"><span class="nav-number">1.3.</span> <span class="nav-text">ä¼ é€’äº‹ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%8F%E7%BB%93-1"><span class="nav-number">1.4.</span> <span class="nav-text">å°ç»“</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E9%93%BE%E4%B8%AD%E7%9A%84%E6%89%8B%E5%8A%BF%E5%A4%84%E7%90%86"><span class="nav-number">2.</span> <span class="nav-text">å“åº”é“¾ä¸­çš„æ‰‹åŠ¿å¤„ç†</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#UIControl-%E5%92%8C%E6%89%8B%E5%8A%BF"><span class="nav-number">2.1.</span> <span class="nav-text">UIControl å’Œæ‰‹åŠ¿</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">3.</span> <span class="nav-text">æ€»ç»“</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="JTao"
      src="/images/JT_logo.gif">
  <p class="site-author-name" itemprop="name">JTao</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">71</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/10/09/iOS-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%8A%E5%93%8D%E5%BA%94%E9%93%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/JT_logo.gif">
      <meta itemprop="name" content="JTao">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æ±Ÿæ¶›çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="iOS äº‹ä»¶ä¼ é€’åŠå“åº”é“¾ | æ±Ÿæ¶›çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          iOS äº‹ä»¶ä¼ é€’åŠå“åº”é“¾
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-10-09 18:23:09" itemprop="dateCreated datePublished" datetime="2021-10-09T18:23:09+08:00">2021-10-09</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>è®°å¾—åœ¨å‡ å¹´å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« <a target="_blank" rel="noopener" href="https://coderjtao.github.io/2018/01/13/%E4%B8%8D%E8%A7%84%E5%88%99Button%E7%82%B9%E5%87%BB%EF%BC%88%E4%B8%80%EF%BC%89/">ã€Šä¸è§„åˆ™ Button ç‚¹å‡»ã€‹</a>ç ”ç©¶äº†ä¸€ä¸‹ iOS ä¸­äº‹ä»¶å“åº”çš„ç›¸å…³çŸ¥è¯†ã€‚</p>
<p>æœ€è¿‘åˆšå¥½ç¢°åˆ°äº†ä¸€äº›ç‚¹å‡»å’Œæ‰‹åŠ¿ç›¸å…³çš„é—®é¢˜ï¼Œå°±è¯¦ç»†è®°å½•ä¸€ä¸‹ iOS ä¸­äº‹ä»¶å“åº”ï¼Œäº‹ä»¶ä¼ é€’ä»¥åŠç»“åˆæ‰‹åŠ¿ä¸€èµ·ä½¿ç”¨æ—¶çš„æƒ…å†µã€‚</p>


<span id="more"></span>

<h1 id="å¯»æ‰¾æœ€ä½³å“åº”è€…å’Œäº‹ä»¶ä¼ é€’"><a href="#å¯»æ‰¾æœ€ä½³å“åº”è€…å’Œäº‹ä»¶ä¼ é€’" class="headerlink" title="å¯»æ‰¾æœ€ä½³å“åº”è€…å’Œäº‹ä»¶ä¼ é€’"></a>å¯»æ‰¾æœ€ä½³å“åº”è€…å’Œäº‹ä»¶ä¼ é€’</h1><h2 id="å“åº”è€…"><a href="#å“åº”è€…" class="headerlink" title="å“åº”è€…"></a>å“åº”è€…</h2><p>iOS ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ UIKit æä¾›çš„ä¼—å¤šç±»æ¥æ­å»ºé¡µé¢ï¼Œå…¶ä¸­ UIResponder ç±»ä¸ºæˆ‘ä»¬æä¾›äº†å“åº”äº‹ä»¶çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„ UIViewã€UIViewController å’Œ UIApplication éƒ½æ˜¯ UIResponder çš„å­ç±»ï¼Œå‡ ä¹æˆ‘ä»¬å¸¸æ¥è§¦çš„ä¸€äº›æ§ä»¶éƒ½æ˜¯å“åº”è€…ã€‚</p>
<p>UIResponder æä¾›äº†ä»¥ä¸‹ä¸€äº›æ–¹æ³•ï¼Œæ¥å¤„ç†äº‹ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">open func touchesBegan(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span><br><span class="line">open func touchesMoved(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span><br><span class="line">open func touchesEnded(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span><br><span class="line">open func touchesCancelled(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span><br></pre></td></tr></table></figure>

<ul>
<li>UITouch<br>å­˜å‚¨ç”¨æˆ·è§¦æ‘¸å±å¹•æ—¶çš„ç›¸å…³æ•°æ®ï¼Œéšç€è§¦æ‘¸çš„å˜åŒ–ï¼ŒUITouch æ•°æ®ä¹Ÿä¼šå®æ—¶æ›´æ–°ã€‚</li>
<li>UIEvent<br>è¢«ä¼ é€’çš„äº‹ä»¶å®ä¾‹ï¼Œé‡Œé¢å­˜å‚¨äº†å½“å‰éœ€è¦è¢«å“åº”äº‹ä»¶çš„ä¸€äº›ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œäº‹ä»¶ç±»å‹ã€‚</li>
</ul>
<h2 id="å¯»æ‰¾æœ€ä½³å“åº”è€…"><a href="#å¯»æ‰¾æœ€ä½³å“åº”è€…" class="headerlink" title="å¯»æ‰¾æœ€ä½³å“åº”è€…"></a>å¯»æ‰¾æœ€ä½³å“åº”è€…</h2><p>ç°åœ¨ï¼Œå¼„æ¸…æ¥šäº†å¤„ç†äº‹ä»¶çš„å¯¹è±¡äº†ã€‚ä½†æ˜¯ï¼Œå±å¹•ä¸Šé‚£ä¹ˆå¤šè§†å›¾å †å ï¼Œè‚¯å®šæ˜¯éœ€è¦ä¸€å¥—æœºåˆ¶ï¼Œè®©æˆ‘ä»¬åˆ¤æ–­è¿™æ¬¡äº‹ä»¶åº”è¯¥ç”±è°å…ˆå¤„ç†ï¼Œä¹Ÿå°±æ˜¯å¯»æ‰¾æœ€ä½³å“åº”è€…ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿå«åš Hit-Testingã€‚</p>
<p>Hit-Testing è¿‡ç¨‹ä¸»è¦ç”¨åˆ°ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// recursively calls -pointInside:withEvent:. point is in the receiver&#x27;s coordinate system</span><br><span class="line">- (nullable UIView *)hitTest:(CGPoint)point withEvent:(nullable UIEvent *)event;</span><br><span class="line"></span><br><span class="line">// default returns YES if point is in bounds</span><br><span class="line">- (BOOL)pointInside:(CGPoint)point withEvent:(nullable UIEvent *)event;</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥ï¼Œé€šè¿‡ä¸€ä¸ªæ¼”ç¤ºä¾‹å­æ¥è¯´æ˜å…·ä½“çš„æµç¨‹ï¼š</p>
<blockquote>
<p>PS: ç³»ç»Ÿæ£€æµ‹åˆ°ä¸€ä¸ªè§¦æ‘¸äº‹ä»¶å‘ç”Ÿåï¼Œä¼šæœ‰ä¸€ç³»åˆ—çš„å¤„ç†ï¼Œè¿™è¾¹å°±å¿½ç•¥æ‰ç³»ç»Ÿå¤„ç†çš„æµç¨‹ï¼Œç›´æ¥è¿›å…¥åˆ°å¼€å‘äººå‘˜éœ€è¦å…³æ³¨çš„åœ°æ–¹ã€‚</p>
</blockquote>
<h3 id="å¯»æ‰¾è¿‡ç¨‹"><a href="#å¯»æ‰¾è¿‡ç¨‹" class="headerlink" title="å¯»æ‰¾è¿‡ç¨‹"></a>å¯»æ‰¾è¿‡ç¨‹</h3><p>é¦–å…ˆï¼Œå…ˆæ˜ç¡®ä¸€ä¸‹è§†å›¾å±‚çº§ï¼š</p>
<img src="/2021/10/09/iOS-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%8A%E5%93%8D%E5%BA%94%E9%93%BE/layer_level.jpg" class="" title="ç¤ºä¾‹å›¾">

<h4 id="ç‚¹å‡»-A-å†…éƒ¨"><a href="#ç‚¹å‡»-A-å†…éƒ¨" class="headerlink" title="ç‚¹å‡» A å†…éƒ¨"></a>ç‚¹å‡» A å†…éƒ¨</h4><img src="/2021/10/09/iOS-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%8A%E5%93%8D%E5%BA%94%E9%93%BE/touch_A.jpg" class="" title="ç¤ºä¾‹å›¾">

<p>å…·ä½“æµç¨‹è¯´æ˜ï¼š</p>
<ol>
<li>é¦–å…ˆå¯¹ A è¿›è¡Œå‘½ä¸­æµ‹è¯•ï¼Œæ˜¾ç„¶è§¦æ‘¸ç‚¹åœ¨ A å†…éƒ¨ã€‚äºæ˜¯ï¼Œåˆ¤æ–­ A æ˜¯å¦æœ‰å­è§†å›¾ï¼Œæœ‰åˆ™æ£€æŸ¥ï¼Œæ— åˆ™è¿”å› A æœ¬èº«ã€‚</li>
<li>å€’åºéå† A çš„å­è§†å›¾ï¼ˆDï¼ŒCï¼‰ï¼Œå€’åºçš„åŸå› æ˜¯ï¼Œåæ·»åŠ è§†å›¾ï¼Œåœ¨ subViews æ•°ç»„çš„åé¢ï¼Œä½†æ˜¯åæ·»åŠ çš„è§†å›¾ï¼Œä½†æ˜¯åœ¨è§†å›¾å±‚çº§ä¸­å¤„äºæœ€ä¸Šæ–¹ã€‚</li>
<li>å¯¹ D è¿›è¡Œå‘½ä¸­æµ‹è¯•ï¼Œå‘ç°è§¦æ‘¸ç‚¹ä¸åœ¨ D ä¸­ï¼Œè¯´æ˜ D åŠå…¶å­è§†å›¾ä¸ä¼šæ˜¯æœ€ä½³å“åº”è€…ã€‚</li>
<li>å¯¹ C è¿›è¡Œå‘½ä¸­æµ‹è¯•ï¼Œå‘ç°è§¦æ‘¸ç‚¹ä¸åœ¨ C ä¸­ï¼Œè¯´æ˜ C åŠå…¶å­è§†å›¾ä¸ä¼šæ˜¯æœ€ä½³å“åº”è€…ã€‚</li>
<li>å­è§†å›¾æ£€æŸ¥å®Œæ¯•ã€‚å¾—åˆ°ç»“è®ºï¼šè§¦æ‘¸ç‚¹åœ¨ A å†…éƒ¨ï¼Œä½†ä¸åœ¨ A çš„ä»»ä¸€å­è§†å›¾å†…ã€‚äºæ˜¯ï¼ŒA å°±æ˜¯æœ€ä½³å“åº”è€…ã€‚</li>
</ol>
<p>A ğŸ†— â€“&gt; DâŒ â€“&gt; CâŒ &gt;&gt;&gt; <strong>A</strong></p>
<h4 id="ç‚¹å‡»-C-å†…éƒ¨"><a href="#ç‚¹å‡»-C-å†…éƒ¨" class="headerlink" title="ç‚¹å‡» C å†…éƒ¨"></a>ç‚¹å‡» C å†…éƒ¨</h4><img src="/2021/10/09/iOS-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%8A%E5%93%8D%E5%BA%94%E9%93%BE/touch_C.jpg" class="" title="ç¤ºä¾‹å›¾">

<p>å…·ä½“æµç¨‹è¯´æ˜ï¼š</p>
<ol>
<li>é¦–å…ˆå¯¹ A è¿›è¡Œå‘½ä¸­æµ‹è¯•ï¼Œæ˜¾ç„¶è§¦æ‘¸ç‚¹åœ¨ A å†…éƒ¨ã€‚äºæ˜¯ï¼Œåˆ¤æ–­ A æ˜¯å¦æœ‰å­è§†å›¾ï¼Œæœ‰åˆ™æ£€æŸ¥ï¼Œæ— åˆ™è¿”å› A æœ¬èº«ã€‚</li>
<li>å€’åºéå† A çš„å­è§†å›¾ï¼ˆDï¼ŒCï¼‰ï¼Œå€’åºçš„åŸå› æ˜¯ï¼Œåæ·»åŠ è§†å›¾ï¼Œåœ¨ subViews æ•°ç»„çš„åé¢ï¼Œä½†æ˜¯åæ·»åŠ çš„è§†å›¾ï¼Œä½†æ˜¯åœ¨è§†å›¾å±‚çº§ä¸­å¤„äºæœ€ä¸Šæ–¹ã€‚</li>
<li>å¯¹ D è¿›è¡Œå‘½ä¸­æµ‹è¯•ï¼Œå‘ç°è§¦æ‘¸ç‚¹ä¸åœ¨ D ä¸­ï¼Œè¯´æ˜ D åŠå…¶å­è§†å›¾ä¸ä¼šæ˜¯æœ€ä½³å“åº”è€…ã€‚</li>
<li>å¯¹ C è¿›è¡Œå‘½ä¸­æµ‹è¯•ï¼Œè§¦æ‘¸ç‚¹åœ¨ C ä¸­ï¼Œè¿›è¡Œå­è§†å›¾çš„æ£€æŸ¥ã€‚</li>
<li>å¯¹ E è¿›è¡Œå‘½ä¸­æµ‹è¯•ï¼Œå‘ç°è§¦æ‘¸ç‚¹ä¸åœ¨ E ä¸­ï¼Œè¯´æ˜ E åŠå…¶å­è§†å›¾ä¸ä¼šæ˜¯æœ€ä½³å“åº”è€…ã€‚</li>
<li>å­è§†å›¾æ£€æŸ¥å®Œæ¯•ã€‚å¾—åˆ°ç»“è®ºï¼šè§¦æ‘¸ç‚¹åœ¨ A å†…éƒ¨å­è§†å›¾ C ä¸­ï¼Œä½†ä¸åœ¨ C çš„ä»»ä¸€å­è§†å›¾å†…ã€‚äºæ˜¯ï¼ŒC å°±æ˜¯æœ€ä½³å“åº”è€…ã€‚</li>
</ol>
<p>A ğŸ†— â€“&gt; DâŒ â€“&gt; CğŸ†— â€“&gt; EâŒ &gt;&gt;&gt; <strong>C</strong></p>
<h4 id="ç‚¹å‡»-E-å†…éƒ¨"><a href="#ç‚¹å‡»-E-å†…éƒ¨" class="headerlink" title="ç‚¹å‡» E å†…éƒ¨"></a>ç‚¹å‡» E å†…éƒ¨</h4><p>è¿™ä¸ªå°±ä¸å†™äº†ï¼Œç»™çœ‹æ–‡ç« çš„ä½ ä»¬ï¼Œç»ƒä¹ ä¸€ä¸‹ã€‚</p>
<h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p><strong>1. Hit-Testing è§¦å‘äº†ä¸¤æ¬¡çš„é—®é¢˜</strong></p>
<p>è¿™ä¸ªé—®é¢˜è‹¹æœå®˜æ–¹è¿›è¡Œè¿‡<a target="_blank" rel="noopener" href="https://lists.apple.com/archives/cocoa-dev/2014/Feb/msg00118.html">å›å¤</a>:</p>
<blockquote>
<p>Yes, itâ€™s normal. The system may tweak the point being hit tested between the calls. Since hitTest should be a pure function with no side-effects, this should be fine.</p>
</blockquote>
<p><strong>2. è§†å›¾æœ¬èº«èƒ½å¦æ¥æ”¶äº‹ä»¶çš„åˆ¤æ–­</strong></p>
<p>å½“è§†å›¾æœ¬èº«çŠ¶æ€è®¾ç½®ï¼Œç¬¦åˆä¸‹æ–¹ä»»ä¸€æ—¶ï¼Œåˆ™è§†å›¾è‡ªèº«ä¸èƒ½å“åº”äº‹ä»¶ã€‚</p>
<ul>
<li>view.isUserInteractionEnabled &#x3D; false</li>
<li>view.isHidden &#x3D; true</li>
<li>view.alpha &lt;&#x3D; 0.01</li>
</ul>
<p><strong>3. ä»£ç å®ç°</strong></p>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯å¯ä»¥è¢« override çš„ã€‚æ‰€ä»¥ï¼Œå¦‚æœéœ€æ±‚ä¸­æœ‰ä¸€äº›å¼‚æ€§çš„æ§ä»¶éœ€è¦ç‰¹æ®Šå¤„ç†æ—¶ï¼Œå¯ä»¥é’ˆå¯¹è‡ªå·±çš„éœ€æ±‚ï¼Œåœ¨è¿™é‡Œé¢åšä¸€äº›ä¿®æ”¹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">class TestTouchView: UIView &#123;</span><br><span class="line">    override func hitTest(_ point: CGPoint, with event: UIEvent?) -&gt; UIView? &#123;</span><br><span class="line">        // 1. åˆ¤æ–­èƒ½å¦æ¥æ”¶äº‹ä»¶</span><br><span class="line">        if !isUserInteractionEnabled || isHidden || alpha &lt;= 0.01 &#123;</span><br><span class="line">            return nil</span><br><span class="line">        &#125;</span><br><span class="line">        // 2. åˆ¤æ–­è§¦æ‘¸ç‚¹æ˜¯å¦åœ¨è‡ªèº«å†…éƒ¨</span><br><span class="line">        if self.point(inside: point, with: event) &#123;</span><br><span class="line">            // 3. å­è§†å›¾å€’åºè¿›è¡Œ Hit-Testing</span><br><span class="line">            for subview in subviews.reversed() &#123;</span><br><span class="line">                let pointInSub = subview.convert(point, from: self)</span><br><span class="line"></span><br><span class="line">                // 4. å­è§†å›¾ä¸‹æœ‰æ›´ä¼˜å“åº”è€…</span><br><span class="line">                if let sub = subview.hitTest(pointInSub, with: event) &#123;</span><br><span class="line">                    return sub</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        // 5. è§¦æ‘¸ç‚¹åœ¨è§†å›¾å†…éƒ¨ä¸”å­è§†å›¾æ— æ›´ä¼˜å“åº”è€…ï¼Œåˆ™è¿”å›è‡ªèº«</span><br><span class="line">        return self</span><br><span class="line">    &#125;</span><br><span class="line">        // è§¦æ‘¸ç‚¹ä¸åœ¨è‡ªèº«å†…éƒ¨</span><br><span class="line">        return nil</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    override func point(inside point: CGPoint, with event: UIEvent?) -&gt; Bool &#123;</span><br><span class="line">        return self.bounds.contains(point)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¼ é€’äº‹ä»¶"><a href="#ä¼ é€’äº‹ä»¶" class="headerlink" title="ä¼ é€’äº‹ä»¶"></a>ä¼ é€’äº‹ä»¶</h2><p>æ‰¾åˆ°æœ€ä½³å“åº”è€…ä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯äº‹ä»¶å¤„ç†äº†ï¼Œæœ€ä½³å“åº”è€…æ‹¥æœ‰ä¼˜å…ˆå¤„ç†äº‹ä»¶çš„æœºä¼šï¼Œå¦‚æœè¯¥è§†å›¾æ— æ³•å¤„ç†è¿™ä¸ªäº‹ä»¶ï¼Œé‚£ä¹ˆäº‹ä»¶ä¼šæ²¿ç€å¯»æ‰¾å“åº”è€…æ—¶çš„è·¯å¾„åå‘ä¼ é€’ã€‚</p>
<p>ä»¥ä¸Šé¢ç« èŠ‚ <strong>ç‚¹å‡» C å†…éƒ¨</strong> çš„ä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ï¼š</p>
<ul>
<li>å¯»æ‰¾æœ€ä½³å“åº”è€…è¿‡ç¨‹</li>
</ul>
<p>A ğŸ†— â€“&gt; DâŒ â€“&gt; CğŸ†— â€“&gt; EâŒ &gt;&gt;&gt; <strong>C</strong></p>
<ul>
<li>äº‹ä»¶ä¼ é€’</li>
</ul>
<p>å»æ‰æ‰“å‰çš„èŠ‚ç‚¹ï¼Œå¹¶é€†è½¬ä¸€ä¸‹ï¼Œå°±å¾—åˆ°ï¼š</p>
<p>C â€“&gt; A</p>
<p>å†æŠŠè¿™ä¸ªå“åº”é“¾å®Œæ•´ä¸€ä¸‹å°±æ˜¯ï¼š</p>
<p>C -&gt; A -&gt; UIViewController å¯¹è±¡ -&gt; UIWindow å¯¹è±¡ -&gt; UIApplication å¯¹è±¡ -&gt; App Delegate</p>
<p>æ‰¾åˆ°ä¸‹ä¸€ä¸ªå“åº”è€…ï¼Œå…¶å®æ˜¯é€šè¿‡ UIResponder çš„ next å±æ€§å¾—åˆ°çš„ï¼Œå¯¹äº UIView æ¥è¯´ï¼Œnext å°±æ˜¯å…¶çˆ¶è§†å›¾æˆ–è€…æ˜¯å…¶æ‰€å±çš„æ§åˆ¶å™¨å¯¹è±¡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open var next: UIResponder? &#123; get &#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œè¿˜æ˜¯ä¸¾ä¸ªä¾‹å­è¯´æ˜ä¸€ä¸‹ã€‚</p>
<img src="/2021/10/09/iOS-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%8A%E5%93%8D%E5%BA%94%E9%93%BE/event_move.jpg" class="" title="ç¤ºä¾‹å›¾">

<h2 id="å°ç»“-1"><a href="#å°ç»“-1" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ol>
<li>åˆ©ç”¨ Hit-Testing æ‰¾åˆ° æœ€ä½³å“åº”è€…ã€‚ç”±ä¸‹å¾€ä¸Šï¼ˆä»æ ¹è§†å›¾å¾€ä¸Šå¯»æ‰¾ï¼‰</li>
<li>ç”±æœ€ä½³å“åº”è€…çš„ next å±æ€§æ¥ç¡®å®šå“åº”é“¾ã€‚</li>
<li>äº‹ä»¶æ²¿ç€ å“åº”é“¾ ä¼ é€’ã€‚ä»ä¸Šå¾€ä¸‹ï¼ˆä»æœ€ä½³å“åº”è€…å¾€ä¸‹å¯»æ‰¾ï¼‰</li>
</ol>
<h1 id="å“åº”é“¾ä¸­çš„æ‰‹åŠ¿å¤„ç†"><a href="#å“åº”é“¾ä¸­çš„æ‰‹åŠ¿å¤„ç†" class="headerlink" title="å“åº”é“¾ä¸­çš„æ‰‹åŠ¿å¤„ç†"></a>å“åº”é“¾ä¸­çš„æ‰‹åŠ¿å¤„ç†</h1><p><strong>å®˜æ–¹æ–‡æ¡£</strong></p>
<blockquote>
<p>Gesture recognizers receive touch and press events before their view does. If a viewâ€™s gesture recognizers fail to recognize a sequence of touches, UIKit sends the touches to the view. If the view doesnâ€™t handle the touches, UIKit passes them up the responder chain.</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/uikit/touches_presses_and_gestures/using_responders_and_the_responder_chain_to_handle_events?language=objc#see-also">æ–‡æ¡£ä¸­</a> è¡¨æ˜äº†æ‰‹åŠ¿è¯†åˆ«å™¨åœ¨è§†å›¾ä¹‹å‰æ¥æ”¶è§¦æ‘¸å’ŒæŒ‰ä¸‹äº‹ä»¶ã€‚å¦‚æœè§†å›¾çš„æ‰‹åŠ¿è¯†åˆ«å™¨æ— æ³•è¯†åˆ«ä¸€ç³»åˆ—è§¦æ‘¸ï¼ŒUIKit ä¼šå°†è§¦æ‘¸å‘é€åˆ°è¯¥è§†å›¾ã€‚å¦‚æœè§†å›¾ä¸å¤„ç†è§¦æ‘¸ï¼ŒUIKit ä¼šå°†å®ƒä»¬æ²¿ç€å“åº”å™¨é“¾å‘ä¸Šä¼ é€’ã€‚</p>
<p>ä¼ é€’çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®å°±æ˜¯ UITouch å’Œ UIEventï¼Œåœ¨ UITouch ä¸­ï¼Œæœ‰ä¸€ä¸ªå±æ€§ gestureRecognizers å­˜å‚¨äº†è§¦æ‘¸æ—¶æ”¶é›†åˆ°çš„æ‰€æœ‰æ‰‹åŠ¿ï¼Œå› ä¸º UITouch æ˜¯ä¼šéšç€è§¦æ‘¸çš„å˜åŒ–ï¼Œä¸æ–­åœ°æ›´æ–°çš„ï¼Œæ‰€ä»¥ gestureRecognizers ä¼šå­˜å‚¨å“åº”é“¾ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„æ‰‹åŠ¿ï¼Œå¹¶ä¸”åœ¨è‡ªèº«ä¸æ–­æ›´æ–°çš„åŒæ—¶ï¼Œæ‰‹åŠ¿è¯†åˆ«ç³»ç»Ÿä¹Ÿä¼šåˆ¤æ–­å½“å‰çš„ UITouch å¯¹è±¡æ˜¯å¦ç¬¦åˆæ”¶é›†åˆ°çš„æ‰‹åŠ¿ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// æ‰‹åŠ¿æ˜¯å¦è¯†åˆ«æˆåŠŸäº†ï¼Œä½†æ˜¯çŠ¶æ€æ˜¯å¦è¦ç”± .possible è½¬åˆ°å…¶å®ƒæ´»è·ƒçŠ¶æ€äº¤ç»™å¼€å‘è€…æ§åˆ¶ã€‚</span><br><span class="line">// YESï¼šè¿›å…¥æ´»è·ƒçŠ¶æ€ã€‚falseï¼šè¿›å…¥ .failed çŠ¶æ€ï¼Œæ‰‹åŠ¿åˆ¤å®šå¤±è´¥ã€‚</span><br><span class="line">- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer;</span><br><span class="line"></span><br><span class="line">// åœ¨æ–°çš„è§¦æ‘¸åˆ°æ¥æ—¶ï¼Œåœ¨ touchesBegan:withEvent: ä¹‹å‰è°ƒç”¨ã€‚</span><br><span class="line">// NOï¼šé˜²æ­¢æ‰‹åŠ¿è¯†åˆ«å™¨è¯†åˆ«åˆ°æ­¤è§¦æ‘¸ã€‚</span><br><span class="line">- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch;</span><br><span class="line"></span><br><span class="line">// åœ¨ -gestureRecognizer:shouldReceiveTouch: or -gestureRecognizer:shouldReceivePress: ä¹‹å‰è°ƒç”¨ä¸€æ¬¡</span><br><span class="line">// NOï¼šé˜²æ­¢æ‰‹åŠ¿è¯†åˆ«å™¨è¯†åˆ«æ­¤äº‹ä»¶</span><br><span class="line">- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveEvent:(UIEvent *)event;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬è¿˜æ˜¯æä¸€ä¸ªä¾‹å­çœ‹çœ‹ï¼Œæ ¹æ®ç»“æœå†æ¥è¯´æ˜ï¼š</p>


<ol>
<li>æ‰¾åˆ°æœ€ä½³å“åº”è€…ä¹‹åï¼Œæ‰‹åŠ¿ç³»ç»Ÿå…ˆåˆ¤æ–­æ˜¯å¦æ¥æ”¶è§¦æ‘¸å’Œäº‹ä»¶ã€‚</li>
<li>UIResponder çš„ touches ç³»åˆ—çš„æ–¹æ³•å¼€å§‹è§¦å‘ã€‚</li>
<li>æ‰‹åŠ¿è¯†åˆ«æˆåŠŸäº†ï¼Œç»™å“åº”è€…å‘é€ touchesCancelled æ¶ˆæ¯ï¼Œä¹‹åä¸ä¼šæ”¶åˆ°æ¥è‡ªè¯¥ UITouch å¯¹è±¡çš„äº‹ä»¶äº†ã€‚</li>
<li>æ‰‹åŠ¿ç³»ç»Ÿå·¥ä½œã€‚</li>
</ol>
<h2 id="UIControl-å’Œæ‰‹åŠ¿"><a href="#UIControl-å’Œæ‰‹åŠ¿" class="headerlink" title="UIControl å’Œæ‰‹åŠ¿"></a>UIControl å’Œæ‰‹åŠ¿</h2><p>UIControl é€šè¿‡ target-action æ–¹å¼æ¥å¤„ç†äº‹ä»¶ï¼Œä½†æ˜¯ UIControl.Event çš„äº‹ä»¶æ˜¯é€šè¿‡å…¶ touches ç³»åˆ—æ–¹æ³•æ¥è¯†åˆ«çš„ï¼Œè€Œæ‰‹åŠ¿å¤„ç†çš„æ—¶æœºä¼šæ›´æ—©ä¸€äº›ã€‚</p>
<p>è¿™é‡Œæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„ TestControl ç»§æ‰¿è‡ª UIControlï¼Œæ·»åŠ äº† .touchUpInside äº‹ä»¶å’Œç‚¹å‡»äº‹ä»¶çš„ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">class TouchEventViewController: UIViewController, UIGestureRecognizerDelegate &#123;</span><br><span class="line"></span><br><span class="line">    @IBOutlet weak var touchViewC: TestTouchViewC!</span><br><span class="line"></span><br><span class="line">    override func viewDidLoad() &#123;</span><br><span class="line">        super.viewDidLoad()</span><br><span class="line"></span><br><span class="line">        let tap = UITapGestureRecognizer(target: self, action: #selector(self.tap(sender:)))</span><br><span class="line">        tap.delegate = self</span><br><span class="line"></span><br><span class="line">        let control = TestControl(frame: CGRect(x: 0, y: 100, width: 40, height: 40))</span><br><span class="line">        control.backgroundColor = UIColor.blue</span><br><span class="line">        control.addTarget(self, action: #selector(self.controlAction(sender:)), for: .touchUpInside)</span><br><span class="line"></span><br><span class="line">        control.addGestureRecognizer(tap)</span><br><span class="line"></span><br><span class="line">        self.view.addSubview(control)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @objc func controlAction(sender: UIControl) &#123;</span><br><span class="line">        print(#function)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    func gestureRecognizerShouldBegin(_ gestureRecognizer: UIGestureRecognizer) -&gt; Bool &#123;</span><br><span class="line">        print(#function)</span><br><span class="line">        return true</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldReceive touch: UITouch) -&gt; Bool &#123;</span><br><span class="line">        print(&quot;\(#function)  UITouch&quot;)</span><br><span class="line">        return true</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldReceive event: UIEvent) -&gt; Bool &#123;</span><br><span class="line">        print(&quot;\(#function)  UIEvent&quot;)</span><br><span class="line">        return true</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @objc func tap(sender: UITapGestureRecognizer) &#123;</span><br><span class="line">        print(#function)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/10/09/iOS-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%8A%E5%93%8D%E5%BA%94%E9%93%BE/uicontrol_gesture.jpg" class="" title="ç¤ºä¾‹å›¾">

<p>å¯¹äºè‡ªå®šä¹‰çš„ UIControl æ¥è¯´ï¼Œæ‰‹åŠ¿è¯†åˆ«çš„ä¼˜å…ˆçº§æ¯” UIControl è‡ªèº«å¤„ç†äº‹ä»¶çš„ä¼˜å…ˆçº§é«˜ã€‚</p>
<p>å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œå¦‚æœ UIControl çš„çˆ¶è§†å›¾ä¸Šå­˜åœ¨ä¸è‡ªèº« controlEvents ä¸€æ ·çš„æ‰‹åŠ¿äº‹ä»¶æ—¶ï¼Œä¼šå¯¼è‡´ UIControl çš„æ–¹æ³•æ— æ³•è§¦å‘ï¼Œæ€»ä¼šè¢«çˆ¶è§†å›¾ä¸­çš„æ‰‹åŠ¿ç»™æˆªæ–­ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿™ä»…ä»…æ˜¯é’ˆå¯¹å’±ä»¬è‡ªå®šä¹‰çš„ UIControl è€Œè¨€ã€‚åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯åœ¨ä½¿ç”¨ç³»ç»Ÿæä¾›äº†ä¸€ç³»åˆ— UIControl çš„å­ç±»ï¼Œå¹¶ä¸ä¼šå­˜åœ¨ä¸Šè¿°çš„é—®é¢˜ã€‚é‚£æ˜¯å› ä¸ºï¼Œè‹¹æœå®˜æ–¹å·²ç»å¯¹è¿™ç§æƒ…å†µåšè¿‡ä¸€äº›<a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/uikit/touches_presses_and_gestures/coordinating_multiple_gesture_recognizers/attaching_gesture_recognizers_to_uikit_controls">ç‰¹æ®Šå¤„ç†</a>ã€‚</p>
<p>å®é™…å¼€å‘ä¸­ï¼Œå½“æˆ‘ä»¬ç»™ä¸€ä¸ªå·²ç»æ‹¥æœ‰ç‚¹å‡»æ‰‹åŠ¿çš„è§†å›¾ï¼Œæ·»åŠ ä¸€ä¸ª UIButton ä½œä¸ºå­è§†å›¾ï¼Œå¹¶ä¸”ç»™æŒ‰é’®æ·»åŠ ç‚¹å‡»ç±»å‹çš„ target-action æ–¹æ³•ï¼Œé‚£ä¹ˆå½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼ŒæŒ‰é’®çš„ target-action æ–¹æ³•ä¼šè§¦å‘ï¼Œæ‰‹åŠ¿çš„æ–¹æ³•ä¼šè¢«å¿½ç•¥ã€‚</p>
<p>å¹¶ä¸”æ–‡æ¡£ä¸­ä¹Ÿæåˆ°äº†ï¼Œå¦‚æœä¸æƒ³è¦è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œé‚£å°±åº”å½“æŠŠæ‰‹åŠ¿æ·»åŠ åˆ°ç›®æ ‡æ§ä»¶ä¸Šï¼ˆå› ä¸ºæ‰‹åŠ¿æ¯”æ§ä»¶æ›´æ—©è¯†åˆ«åˆ°äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸Šæ–‡æåˆ°çš„ç»™ UIControl æ·»åŠ äº† .touchupInside æ–¹æ³•çš„ä¾‹å­ï¼‰ï¼Œè¿™æ ·çš„è¯ç”Ÿæ•ˆçš„å°±æ˜¯æ‰‹åŠ¿äº†ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ol>
<li>äº‹ä»¶ä¼ é€’åˆ° APP å†…éƒ¨æ—¶è¢«å°è£…æˆå¼€å‘è€…å¯è§çš„ UIEvent å¯¹è±¡ï¼Œå…ˆç»è¿‡ Hit-Testing å¯»æ‰¾æœ€ä½³å“åº”è€…ï¼Œè€Œåå°†äº‹ä»¶ä¼ é€’ç»™æœ€ä½³å“åº”è€…ï¼Œå¹¶å¼€å§‹åœ¨å“åº”é“¾ä¸Šçš„ä¼ é€’ã€‚</li>
<li>UIRespnderã€UIGestureRecognizerã€UIControlï¼Œç¬¼ç»Ÿåœ°è®²ï¼Œäº‹ä»¶å“åº”ä¼˜å…ˆçº§ä¾æ¬¡é€’å¢ã€‚</li>
</ol>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/09/05/iOS-%E5%9B%BE%E7%89%87%E8%B0%83%E6%95%B4%E6%8A%80%E5%B7%A7/" rel="prev" title="iOS è°ƒæ•´å›¾ç‰‡ tips">
                  <i class="fa fa-chevron-left"></i> iOS è°ƒæ•´å›¾ç‰‡ tips
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JTao</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
